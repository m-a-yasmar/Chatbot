<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TalkAI Global - Pioneers in AI Automation</title>
    <style>
        /* Basic Reset */
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Font */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            line-height: 1.6;
            background: url('image/talkaiimage.png') center/cover no-repeat;
            overflow-y: scroll;
            padding-bottom: 5rem; /* Add padding to view the bottom content without scrolling */
        }

        /* Header */
	 header {
	    display: flex;
	    align-items: center;
            justify-content: space-between;
            background-color: #1a1a1a;
            color: #fff;
            padding-top: 1rem 0;
            background: url('image/talkaiimage.png')center/cover no-repeat;
            text-align: center;
            position: relative;
        }

        header h1, header p {
            color: white;
        }

        /* Logo Image */
        .logo {
            flex-shrik: 0;
            max-width: 100px; /* Adjust as needed */
            height: auto;
            border-radius: 50%; /* Make the logo round */
        }

        /* Navigation Bar */
        nav {
            display: flex;
            justify-content: center;
            background: rgba(51, 51, 51, 0.8); /* Slightly transparent background */
            padding: 0.5rem;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem;
            font-weight: bold;
        }

        /* Intro Section */
        .intro {
            font-size: 1rem;
            font-weight: bold;
            padding: 1rem; /* Reduced padding */
            background: linear-gradient(to right, #0052d4, #4364f7, #6fb1fc);
            color: white;
            text-align: center;
        }

        .intro h1, .intro h2 {
            color: white;
        }

        .intro h2 {
            font-size: 1.5rem;
        }


        /* Services Section */
        
        .services {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 2rem;
            background: #f4f4f4;
         }
         .service-item {
             background: white;
             padding: 1rem;
             box-shadow: 0 4px 8px rgba(0,0,0,0.1);
             border-radius: 8px;
         }

	
	 .service-item:hover {
             transform: translateY(-5px);
             box-shadow: 0 6px 12px rgba(0,0,0,0.2);
         }

         .services h2, .services p {
             color: blue;
         }

     
        /* Footer */
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 1rem 0;
            position: relative;
        }

       
	 /* Chatbot styles */
        #chat-container {
            width: 80%;
            max-height: 60vh;
            background: white;
            border-radius: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            overflow-y: auto;
            margin: 20px auto;
	    padding: 10px;
            display: flex;
            flex-direction: column;
        }

        #chat-header {
            background: var(--primary-bg-color, #0052d4);
            color: var(--primary-text-color, white);
            padding: 0.5rem;
            text-align: center;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
        }


	      #chat-box {
            flex-grow: 1;
            padding: 100px;
            overflow-y: auto;
        }

        .message {
            margin-bottom: 20px;
            padding: 25px;
            border-radius: 5px;
            box-shadow: 0 0 5px rgba(0,0,0,0.1);
	    background-color: #4364f7; /* Secondary color for messages */
            color: white;
	    
        }

        .user-message, .bot-message {
            text-align: left;
            background-color: var(--secondary-bg-color, #4364f7);
            color: var(--primary-text-color, white);
        }

        #chat-input {
            display: flex;
            border-top: 3px solid #ccc;
	    background: #f4f4f4; 
        }

        #query {
            flex-grow: 1;
            padding: 1rem;
            border: none;
        }

	#query {
    	    flex-grow: 1; /* Allow input to take available space */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
	
        #send-button {
            width: 80px;
            background: var(--button-bg, #000);
            color: var(--primary-text-color, white);
            border: none;
            cursor: pointer;
            margin-left: 5px
        }	


	/* Responsive Design Adjustments */


	@media screen and (max-width: 768px) {
    	    nav a {
                padding: 0.3rem;
            }

            .intro h2 {
                font-size: 1.2rem;
            }

            .services {
                padding: 1rem;
            }

	    .services {
		grid-template-column: 1fr;
	    }

            .service-item {
                padding: 0.5rem;
	    
            }
         }

         @media screen and (max-width: 480px) {
             nav {
                 flex-direction: column;
             }

             nav a {
                 padding: 0.5rem;
             }
         }
	 @media screen and (max-width: 600px) {
    	    #chat-box {
                padding: 10px; /* Less padding on smaller screens */
            }

            .message {
                max-width: calc(100% - 20px); /* Adjusting for smaller screens */
                padding: 8px; /* Slightly smaller padding for messages */
            }
        }

    </style>
	
</head>
<body>
    <header>
        <img src="image/talkailogo.png" alt="TalkAI Logo" class="logo">
        <nav>
        <a href="/frontpage">Home</a>
        <a href="/services">Services</a>
        <a href="/contact">Contact</a>
        </nav>
    </header>

    <section class="services">
        <h2>Our Services</h2>
        <div class="service-item">
            <h3>Autonomous Systems</h3>
            <p>Our Autonomous Systems service focuses on creating self-learning and adaptive AI systems that can transform your operational efficiency. We    specialize in developing solutions that can autonomously analyze data, make decisions, and execute tasks, thereby optimizing your workflows and reducing manual intervention.</p>
        </div>
        <div class="service-item">
            <h3>Strategic AI Consulting</h3>
            <p>At TalkAI Global, we provide comprehensive AI consulting services to help businesses identify the most beneficial AI applications. Our Strategic AI Consulting includes in-depth analysis, strategic planning, and implementation guidance to ensure that your business harnesses the full potential of AI technologies effectively and ethically.</p>
        </div>
        <div class="service-item">
            <h3>Custom AI Solutions</h3>
            <p>We understand that every business has unique challenges and opportunities. Our Custom AI Solutions are tailored to meet the specific needs of your enterprise. We work closely with you to develop bespoke AI applications that not only solve your current challenges but also scale with your business's growth.</p>
        </div>
   
    </section>

    <section id="chat-container">
        <header id="chat-header">TalkAI</header>
        <div id="welcome-message">
            Welcome to TalkAI Global! I'm here to assist you with innovative AI solutions and insights. How can I help you today?
        </div>
        <article id="chat-box"></article>
        <div id="chat-input">
            <input type="text" id="query" placeholder="Ask a question..." onkeydown="if (event.keyCode == 13) askQuestion()">
            <button id="send-button" onclick="askQuestion()">Ask</button>
        </div>
	<div id="typing-indicator" style="display: none; text-align: left; padding: 10px;">
	    <img src="image/hourglass.gif" alt="Typing..." /> <!-- Example with an image -->
	    <!-- Or you can use text like: <span>Typing...</span> -->
	</div>
    </section>

    <footer>
        <p>&copy; 2023 TalkAI Global. All Rights Reserved.</p>
    </footer>

    <script>
    // Function to generate or retrieve a unique user ID
    function getUserId() {
        // Check if user_id already exists in local storage
        let user_id = localStorage.getItem('user_id');
        if (!user_id) {
            // If not, generate a new user ID
            user_id = 'user_' + new Date().getTime() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('user_id', user_id);
        }
        return user_id; // Ensure this line is outside the 'if' block
    }

    async function askQuestion() {
    try {
	document.getElementById('send-button').disabled = true;
	const query = document.getElementById('query').value;
	const user_id = getUserId(); 
	const chatBox = document.getElementById('chat-box');
	displayMessage(query, 'user-message');
	// Show typing indicator
	document.getElementById('typing-indicator').style.display = 'block';
	const response = await fetch('https://get2jamaica-f5858d819214.herokuapp.com/ask', {
	    method: 'POST',
	    headers: { 'Content-Type': 'application/json' },
	    body: JSON.stringify({ user_id: user_id, query: query }),
	    credentials: 'include' 
	});
	// Hide typing indicator
	document.getElementById('typing-indicator').style.display = 'none';
	const data = await response.json();
	displayMessage(data.answer, 'bot-message');
	chatBox.scrollTop = chatBox.scrollHeight;
	document.getElementById('query').value = '';
    } catch (error) {
	console.error('An error occurred:', error);
	document.getElementById('typing-indicator').style.display = 'none'; // Hide on error as well
    } finally {
	document.getElementById('send-button').disabled = false;
    }
}
function saveMessageToHistory(message, className) {
    let chatHistory = JSON.parse(localStorage.getItem('chatHistory')) || [];
    chatHistory.push({ message, className });
    localStorage.setItem('chatHistory', JSON.stringify(chatHistory));
}
function loadChatHistory() {
    let chatHistory = JSON.parse(localStorage.getItem('chatHistory')) || [];
    chatHistory.forEach(item => displayMessage(item.message, item.className));
}

// Add this global variable to store the timeout ID
let chatClearTimeoutId;

function clearChatHistory() {
    // Clear chat history from local storage
    localStorage.removeItem('chatHistory');

    // Clear chat display
    const chatBox = document.getElementById('chat-box');
    chatBox.innerHTML = '';

    // Reset timeout
    clearTimeout(chatClearTimeoutId);
    setChatClearTimeout();
}

function setChatClearTimeout() {
    // Set timeout for 1 hour (3600000 milliseconds)
    chatClearTimeoutId = setTimeout(clearChatHistory, 3600000);
}

window.onload = function() {
    loadChatHistory();
    setChatClearTimeout();
    // ... other onload functionalities
};

function displayMessage(message, className) {
    const chatBox = document.getElementById('chat-box');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${className}`;
    messageDiv.innerHTML = message;
    chatBox.appendChild(messageDiv);
    chatBox.scrollTop = chatBox.scrollHeight; // Auto-scroll to the bottom
    saveMessageToHistory(message, className);
}	    
</script>
</body>
</html>
